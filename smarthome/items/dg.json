{
  "$schema": "../schema/ItemSchema.json",
  "Dg": {
    "Trigger": {
      "$order": 1,
      "type": "bool",
      "enforce_updates": true,
      "cycle": "300 = 1"
    },
    "Eltern": {
      "Jalousie": {
        "Fenster": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/11"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/14 | 3/2/15"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Eltern",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_Ost"
              },
              "Morgendaemmerung": {
                "enter": {
                    "as_value_MorgendaemmerungAktive": "True",
                    "as_min_time": "07:30",
                    "as_max_time": "08:00"
                }
              },
             
              "Tag": {
                "enter": {
                    "as_value_TagAktive": "True",
                    "as_min_time": "08:00"
                }
              }
            }
          }
        }

      },
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/11"
        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/10"
        }
      }
    },
    "Gaeste": {
      "Jalousie": {
        "Fenster": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/21"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/21 | 3/2/22"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Gaestezimmer"
            }
          }
        }
      },
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/21"
        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/20"
        }
      }
    },
    "Flur": {
        "Jalousie": {
            "Fenster": {
                "$template": {
                    "source": "jalousie",
                    "knx": "0/2/111"
                },
                "ManuellKNX": {
                "knx_listen": "3/2/111 | 3/2/112"
            },
                "autoBlind": {
                    "Rules": {
                        "$templated": true,
                        "as_plugin": "active",
                        "name": "Dg Flur"
                    }
                }
            }
        },
        "Einzelraumregelung": {
            "$template": {
                "source": "einzelraumregelung",
                "knx": "0/2/111"
            }
        },
        "Dachfenster": {
            "$template": {

                "source": "dachfenster",
                "knx": "4/2/114"
            },
            "autoBlind": {
                "Rules": {
                    "$templated": true,
                    "as_plugin": "nactive",
                    "name": "Dg Flur Dachfenster"
                }
            }
        },
        "Praesenz": {
            "$template": {
                "source": "praesenz",
                "knx": "2/2/0"
            }
        },
        "ClickControl": {
            "$template": {
                "source": "clickcontrol",
                "knx": "6/2/111"
            },
            "Rules": {
                "Zaehler_jalousie": {
                    "cc_count_counter_Jalousie": 2
                }

            },
            "State": {
                "Auf_ab": {
                    "Fenster": {
                        "eval": "~~() if ( ~~~.Zaehler_jalousie() == 0)",
                        "eval_trigger": "~~",
                        "set_item": {
                            "type": "bool",
                            "eval": "~~()",
                            "eval_trigger": "~~",
                             "item":"sh.Dg.Flur.Jalousie.Fenster.Auf_ab" 
                        }
                    },
                    "Dachfenster": {
                        "eval": "~~() if ( ~~~.Zaehler_jalousie() == 1)",
                        "eval_trigger": "~~",
                        "set_item": {
                            "type": "bool",
                            "eval": "~~()",
                            "eval_trigger": "~~",
                                "item":"sh.Dg.Flur.Dachfenster.Auf_ab" 
                        }
                    }
                },
                "Lamellenverstellung_stop": {
                    "Fenster": {
                        "eval": "~~() if ( ~~~.Zaehler_jalousie() == 0)",
                        "eval_trigger": "~~",
                        "set_item": {
                            "type": "bool",
                            "eval": "~~()",
                            "eval_trigger": "~~",
                            "item": "sh.Dg.Flur.Jalousie.Fenster.Lamellenverstellung_stop" 
                        }
                    },
                    "Dachfenster": {
                        "eval": "~~() if ( ~~~.Zaehler_jalousie() == 1)",
                        "eval_trigger": "~~",
                        "set_item": {
                            "type": "bool",
                            "eval": "~~()",
                            "eval_trigger": "~~",
                                "item":"sh.Dg.Flur.Dachfenster.Lamellenverstellung_stop" 
                        }
                    }
                }
            },

            "Leds": {
                "$templated": true,
                "Led1Prio": {
                    "eval": "True if (~~~.State.Zaehler_jalousie()==1 or ~~~.State.Zaehler_jalousie()==2)  else False",
                    "eval_trigger": "~~~.State.Zaehler_jalousie"
                },
                "Led2Prio": {
                    "eval": "True if (~~~.State.Zaehler_jalousie()==1 or ~~~.State.Zaehler_jalousie()==2)  else False",
                    "eval_trigger": "~~~.State.Zaehler_jalousie"
                },
                "Led3Prio": {
                    "eval": "True if (~~~.State.Zaehler_jalousie()==2)  else False",
                    "eval_trigger": "~~~.State.Zaehler_jalousie"
                },
                "Led4Prio": {
                    "eval": "True if (~~~.State.Zaehler_jalousie()==2)  else False",
                    "eval_trigger": "~~~.State.Zaehler_jalousie"
                }
            }
        }
    },
    "Carla": {
      "Jalousie": {
        "Fenster": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/31"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/31 | 3/2/32"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Carla Zimmer",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_West"
              }
            }
          }
        }
      },
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/31"
        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/30"
        }
      }
    },
    "Mattia": {
      "Jalousie": {
        "Fenster": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/41"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/41 | 3/2/42"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Mattia Zimmer",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_West"
              }
            }
          }
        }
      },
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/41"
        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/40"
        }
      }
    },
    "Wohnzimmer": {
      "Jalousie": {
        "Fenster": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/61"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/68 | 3/2/69"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Wohnzimmer Fenster",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_West"
              }
            }
          }
        },
        "Terrasse": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/64"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/68 | 3/2/69"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
                "name": "Dg Wohnzimmer Terasse",
                "eval_trigger": "~~~~~~.Trigger | ~~.manuell | ~~.suspend | ~~.automatik | ~~.beschatten | ~~~.Position_gueltig | ~~~.ReferenzFahren | ~~~~~.Schiebetuer.Status",
                "as_item_schiebetuer": ".....Schiebetuer.Status",
                "Schiebetuer": {
                    "$order": 2,
                    "as_use": "Jalousie_default.Schiebetuer"
                },
                "Beschatten": {
                    "$order": 30,
                    "as_use": "Jalousie_default.Beschatten_Sued"
                }
            }
          }
        }
      },
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/61"
        }
      },
      "Schiebetuer": {
        "Status": {
          "type": "bool",
          "visu_acl": "ro",
          "knx_dpt": "1",
          "knx_listen": "4/2/65"
        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/60"
        }
      }
    },
    "Kueche": {
      "Beleuchtung": {
        "Arbeitsplatte": {
          "Schalten": {
            "type": "bool",
            "visu_acl": "rw"
          },
          "Dimmen": {
            "type": "num",
            "visu_acl": "rw",
            "dmx_ch": "1"
          }
        }
      },
      "Jalousie": {
        "Kochinsel": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/81"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/171 | 3/2/172"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Fenster Kochinsel",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_Sued",
                "enter": {
                    "as_max_sun_altitude": "38"
                }
              }
            }
          }
        },
        "Arbeitsflaeche": {
          "$template": {
            "source": "jalousie",
            "knx": "0/2/84"
          },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Fenster Arbeitsflaeche",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_Ost"
              }
            }
          }
        },
        "Speiss": {
          "$template": {
            "source": "jalousie",
            "knx": "0/2/87"
          },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Fenster Speiss",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_Ost"
              }
            }
          }
        }
      },
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/81"
        }
      },
      "ClickControl": {
        "$template": {
            "source": "clickcontrol",
            "knx": "6/2/81"
        },
         "State": {
                "Auf_ab": {
                    "Arbeitsflaeche": {
                        "eval": "~~() if ~~~.Zaehler_jalousie()==0 else value",
                        "eval_trigger": "~~",
                        "set_item": {
                            "type": "bool",
                            "eval": "~~()",
                            "eval_trigger": "~~",
                             "item":"sh.Dg.Kueche.Jalousie.Arbeitsflaeche.Auf_ab" 
                        }
                    },
                    "Kochinsel": {
                        "eval": "~~() if ~~~.Zaehler_jalousie()==1 else value",
                        "eval_trigger": "~~",
                        "set_item": {
                            "type": "bool",
                            "eval": "~~()",
                            "eval_trigger": "~~",
                                "item":"sh.Dg.Kueche.Jalousie.Kochinsel.Auf_ab" 
                        }
                    }
                },
                "Lamellenverstellung_stop": {
                    "Arbeitsflaeche": {
                        "eval": "~~() if  ~~~.Zaehler_jalousie()==0 else value",
                        "eval_trigger": "~~",
                        "set_item": {
                            "type": "bool",
                            "eval": "~~()",
                            "eval_trigger": "~~",
                            "item": "sh.Dg.Kueche.Jalousie.Arbeitsflaeche.Lamellenverstellung_stop" 
                        }
                    },
                    "Kochinsel": {
                        "eval": "~~() if  ~~~.Zaehler_jalousie()==1 else value",
                        "eval_trigger": "~~",
                        "set_item": {
                            "type": "bool",
                            "eval": "~~()",
                            "eval_trigger": "~~",
                                "item":"sh.Dg.Kueche.Jalousie.Kochinsel.Lamellenverstellung_stop" 
                        }
                    }
                }
            },
        "Leds": {
          "$templated": true,
          "Led2Prio": {
            "eval": "True if (~~~.State.Zaehler_jalousie()==3)  else False",
            "eval_trigger": "~~~.State.Zaehler_jalousie"
          },
          "Led3Prio": {
            "eval": "True if (~~~.State.Zaehler_jalousie()==2 or ~~~.State.Zaehler_jalousie()==4)  else False",
            "eval_trigger": "~~~.State.Zaehler_jalousie"
          },
          "Led4Prio": {
            "eval": "True if (~~~.State.Zaehler_jalousie()==1 or ~~~.State.Zaehler_jalousie()==4)  else False",
            "eval_trigger": "~~~.State.Zaehler_jalousie"
          }

        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/80"
        }
      }
    },
    "Essen": {
      "Beleuchtung": {
        "Tisch": {
          "Schalten": {
            "type": "bool",
            "visu_acl": "rw"
          },
          "DMX": {
            "type": "num",
            "visu_acl": "rw",
            "dmx_ch": "1"
          }
        }
      },
      "Jalousie": {
        "Terrasse": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/74"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/174 | 3/2/175"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Essen Terrasse",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_West"
              }
            }
          }
        },
        "Terrasse_Schiebetuer": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/71"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/174 | 3/2/175"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
                "name": "Dg Essen Terrasse Schiebetuer",
                "eval_trigger": "~~~~~~.Trigger | ~~.manuell | ~~.suspend | ~~.automatik | ~~.beschatten | ~~~.Position_gueltig | ~~~.ReferenzFahren | ~~~~~.Schiebetuer.Status",
                "as_item_schiebetuer": ".....Schiebetuer.Status",
                "Schiebetuer": {
                    "$order": 2,
                    "as_use": "Jalousie_default.Schiebetuer"
                },
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_West"
              }
            }
          }
        },
        "Fenster": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/77"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/171 | 3/2/172"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Esstisch",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_Sued",
                "enter": {
                    "as_max_sun_altitude": "38"
                }
              }
            }
          }
        }
      },
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/71"
        }
      },
      "Schiebetuer": {
        "Status": {
          "type": "bool",
          "visu_acl": "ro",
          "knx_dpt": "1",
          "knx_listen": "4/2/75"
        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/70"
        }
      }
    },
    "Bad": {
      "Jalousie": {
        "Fenster_klein": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/91"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/97 | 3/2/98"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Bad Fenster klein",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_Ost"
              }
            }
          }
        },
        "Fenster_gross": {
            "$template": {
                "source": "jalousie",
                "knx": "0/2/94"
            },
            "ManuellKNX": {
                "knx_listen": "3/2/14 | 3/2/15 | 3/2/97 | 3/2/98"
            },
          "autoBlind": {
            "Rules": {
              "$templated": true,
              "as_plugin": "active",
              "name": "Dg Bad Fenster groß",
              "Beschatten": {
                "$order": 30,
                "as_use": "Jalousie_default.Beschatten_Ost"
              }
            }
          }
        }
      },
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/91"
        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/90"
        }
      }
    },
    "TagesWC": {
      "Einzelraumregelung": {
        "$template": {
          "source": "einzelraumregelung",
          "knx": "0/2/131"
        }
      },
      "Praesenz": {
        "$template": {
          "source": "praesenz",
          "knx": "2/2/130"
        }
      }
    },
    "Kriechboden": {
      "Dachfenster": {
        "$template": {
          "source": "dachfenster",
          "knx": "4/2/121"
        },
        "autoBlind": {
          "Rules": {
            "$templated": true,
            "as_plugin": "nactive",
            "name": "Dg Flur Dachfenster"
          }
        }
      }
    }
  }
}
